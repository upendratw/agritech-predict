{"ast":null,"code":"// frontend/src/api.js\n// Handles API calls to the backend (http://localhost:8600)\n\nconst BASE_URL = \"http://localhost:8600\";\n\n/**\n * Uploads an image to the backend and runs inference.\n * Returns: JSON { boxes_count, boxes, out_image_url, raw_outputs_url }\n */\nexport async function inferImage(file) {\n  const formData = new FormData();\n  formData.append(\"image\", file); // ðŸ‘ˆ must match FastAPI argument name\n\n  const params = new URLSearchParams({\n    image_size: 512,\n    score_threshold: 0.3,\n    topk: 200\n  });\n  const response = await fetch(`${BASE_URL}/infer?${params.toString()}`, {\n    method: \"POST\",\n    body: formData // sends multipart/form-data\n  });\n  if (!response.ok) {\n    const text = await response.text();\n    throw new Error(`Infer failed: ${response.status} ${response.statusText} â€” ${text}`);\n  }\n  return await response.json();\n}\n\n/**\n * Optional helper: ping the backend root.\n */\nexport async function checkBackend() {\n  const response = await fetch(`${BASE_URL}/`);\n  return response.ok;\n}","map":{"version":3,"names":["BASE_URL","inferImage","file","formData","FormData","append","params","URLSearchParams","image_size","score_threshold","topk","response","fetch","toString","method","body","ok","text","Error","status","statusText","json","checkBackend"],"sources":["/Users/upendra/Desktop/agritech-predict/frontend/src/api.js"],"sourcesContent":["// frontend/src/api.js\n// Handles API calls to the backend (http://localhost:8600)\n\nconst BASE_URL = \"http://localhost:8600\";\n\n/**\n * Uploads an image to the backend and runs inference.\n * Returns: JSON { boxes_count, boxes, out_image_url, raw_outputs_url }\n */\nexport async function inferImage(file) {\n  const formData = new FormData();\n  formData.append(\"image\", file); // ðŸ‘ˆ must match FastAPI argument name\n\n  const params = new URLSearchParams({\n    image_size: 512,\n    score_threshold: 0.3,\n    topk: 200,\n  });\n\n  const response = await fetch(`${BASE_URL}/infer?${params.toString()}`, {\n    method: \"POST\",\n    body: formData, // sends multipart/form-data\n  });\n\n  if (!response.ok) {\n    const text = await response.text();\n    throw new Error(`Infer failed: ${response.status} ${response.statusText} â€” ${text}`);\n  }\n\n  return await response.json();\n}\n\n/**\n * Optional helper: ping the backend root.\n */\nexport async function checkBackend() {\n  const response = await fetch(`${BASE_URL}/`);\n  return response.ok;\n}"],"mappings":"AAAA;AACA;;AAEA,MAAMA,QAAQ,GAAG,uBAAuB;;AAExC;AACA;AACA;AACA;AACA,OAAO,eAAeC,UAAUA,CAACC,IAAI,EAAE;EACrC,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEH,IAAI,CAAC,CAAC,CAAC;;EAEhC,MAAMI,MAAM,GAAG,IAAIC,eAAe,CAAC;IACjCC,UAAU,EAAE,GAAG;IACfC,eAAe,EAAE,GAAG;IACpBC,IAAI,EAAE;EACR,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGZ,QAAQ,UAAUM,MAAM,CAACO,QAAQ,CAAC,CAAC,EAAE,EAAE;IACrEC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEZ,QAAQ,CAAE;EAClB,CAAC,CAAC;EAEF,IAAI,CAACQ,QAAQ,CAACK,EAAE,EAAE;IAChB,MAAMC,IAAI,GAAG,MAAMN,QAAQ,CAACM,IAAI,CAAC,CAAC;IAClC,MAAM,IAAIC,KAAK,CAAC,iBAAiBP,QAAQ,CAACQ,MAAM,IAAIR,QAAQ,CAACS,UAAU,MAAMH,IAAI,EAAE,CAAC;EACtF;EAEA,OAAO,MAAMN,QAAQ,CAACU,IAAI,CAAC,CAAC;AAC9B;;AAEA;AACA;AACA;AACA,OAAO,eAAeC,YAAYA,CAAA,EAAG;EACnC,MAAMX,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGZ,QAAQ,GAAG,CAAC;EAC5C,OAAOW,QAAQ,CAACK,EAAE;AACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}