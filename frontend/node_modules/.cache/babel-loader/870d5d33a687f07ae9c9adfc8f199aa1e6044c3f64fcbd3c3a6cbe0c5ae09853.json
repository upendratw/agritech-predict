{"ast":null,"code":"// src/api.js\nconst BASE = process.env.REACT_APP_BACKEND_URL || \"http://localhost:8600\";\nexport async function inferImage(file, {\n  checkpoint = null,\n  image_size = 512,\n  score_threshold = 0.3,\n  topk = 200\n} = {}) {\n  const url = `${BASE}/infer?image_size=${encodeURIComponent(image_size)}&score_threshold=${encodeURIComponent(score_threshold)}&topk=${encodeURIComponent(topk)}${checkpoint ? `&checkpoint=${encodeURIComponent(checkpoint)}` : \"\"}`;\n  const fd = new FormData();\n  fd.append(\"file\", file, file.name);\n  const res = await fetch(url, {\n    method: \"POST\",\n    body: fd\n  });\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(`Infer failed: ${res.status} ${res.statusText} — ${txt}`);\n  }\n  const data = await res.json();\n  return data;\n}","map":{"version":3,"names":["BASE","process","env","REACT_APP_BACKEND_URL","inferImage","file","checkpoint","image_size","score_threshold","topk","url","encodeURIComponent","fd","FormData","append","name","res","fetch","method","body","ok","txt","text","Error","status","statusText","data","json"],"sources":["/Users/upendra/Desktop/agritech-predict/frontend/src/api.js"],"sourcesContent":["// src/api.js\nconst BASE = process.env.REACT_APP_BACKEND_URL || \"http://localhost:8600\";\n\nexport async function inferImage(file, { checkpoint = null, image_size = 512, score_threshold = 0.3, topk = 200 } = {}) {\n  const url = `${BASE}/infer?image_size=${encodeURIComponent(image_size)}&score_threshold=${encodeURIComponent(score_threshold)}&topk=${encodeURIComponent(topk)}${checkpoint ? `&checkpoint=${encodeURIComponent(checkpoint)}` : \"\"}`;\n  const fd = new FormData();\n  fd.append(\"file\", file, file.name);\n\n  const res = await fetch(url, {\n    method: \"POST\",\n    body: fd,\n  });\n\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(`Infer failed: ${res.status} ${res.statusText} — ${txt}`);\n  }\n  const data = await res.json();\n  return data;\n}"],"mappings":"AAAA;AACA,MAAMA,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,IAAI,uBAAuB;AAEzE,OAAO,eAAeC,UAAUA,CAACC,IAAI,EAAE;EAAEC,UAAU,GAAG,IAAI;EAAEC,UAAU,GAAG,GAAG;EAAEC,eAAe,GAAG,GAAG;EAAEC,IAAI,GAAG;AAAI,CAAC,GAAG,CAAC,CAAC,EAAE;EACtH,MAAMC,GAAG,GAAG,GAAGV,IAAI,qBAAqBW,kBAAkB,CAACJ,UAAU,CAAC,oBAAoBI,kBAAkB,CAACH,eAAe,CAAC,SAASG,kBAAkB,CAACF,IAAI,CAAC,GAAGH,UAAU,GAAG,eAAeK,kBAAkB,CAACL,UAAU,CAAC,EAAE,GAAG,EAAE,EAAE;EACpO,MAAMM,EAAE,GAAG,IAAIC,QAAQ,CAAC,CAAC;EACzBD,EAAE,CAACE,MAAM,CAAC,MAAM,EAAET,IAAI,EAAEA,IAAI,CAACU,IAAI,CAAC;EAElC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACP,GAAG,EAAE;IAC3BQ,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEP;EACR,CAAC,CAAC;EAEF,IAAI,CAACI,GAAG,CAACI,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;IAC5B,MAAM,IAAIC,KAAK,CAAC,iBAAiBP,GAAG,CAACQ,MAAM,IAAIR,GAAG,CAACS,UAAU,MAAMJ,GAAG,EAAE,CAAC;EAC3E;EACA,MAAMK,IAAI,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,CAAC;EAC7B,OAAOD,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}